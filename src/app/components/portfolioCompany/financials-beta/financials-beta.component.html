<div class="company-finacial company-kpis pb-3" *ngIf="tabList.length>0">
  <div class="mt-3 financial-tab-header p-2">
      {{subHeaderName}}
  </div>
  <div class="financial-page financials-v1">
          <div class="panel panel-default border-0 pt-2 tab-bg">
              <div class="allvalues mt-2 float-right">All values in: {{selectedCurrencyCode}} '000</div>
              <div class="panel-heading">
                  <div class="panel-title custom-tabs">
                      <ul class="nav nav-tabs ">
                          <li class="nav-item" role="presentation" *ngFor="let tab of tabList;" (click)="selectTab(tab);ErrorNotation = false;">
                              <button class="nav-link nav-custom settingMoreThan25Chars" [ngClass]="tab.active?'active':''" id="home-tab" data-bs-toggle="tab" type="button" role="tab" aria-controls="home" aria-selected="true">
                                {{tab.tabAliasName}}
                              </button>
                          </li>
                      </ul>
                  </div>
              </div>
          </div>
          <div class="filter-bg financials-ContainerPadding">
          <div class="border-top ">
            <div class="row mr-0 ml-0 filterContainerPadding">
                <div class=" col-lg-12 col-md-12 col-sm-12 pl-0 pr-0">
                    <div class="float-left">
                        <div class="pl-3" *ngIf="isChildtab">
                            <div class="nep-tabs nep-tabs-line">
                                <div class="nep-tabs-header">
                                    <div class="nep-tabs-header-tabs">
                                        <div class="nep-tabs-inner">
                                            <div class="nep-tabs-scroll nep-tab-alignment-subtab financial-section">
                                                <div class="nep-tabs-tab"   *ngFor="let tab of tabValueTypeList" (click)="selectValueTab(tab);ErrorNotation = false;" [class.nep-tabs-active]="tab.active" [ngStyle]="{'padding': '0px !important'}">
                                                    {{tab.name}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pull-right headerfontsize">
                        <div class="d-inline  QMY_Container">
                            <div class="d-inline">
                                <div class="d-inline QMY_Text MStyle QMYStyle"   (click)="onChangePeriodOption('isMonthly');ErrorNotation = false;" [ngClass]="[isMonthly?'activeQMY':'',model.subTabName=='IC'?'btn-cursor-none':'']">
                                    Monthly
                                </div>
                                <div class="d-inline QMY_Text QMYStyle"    (click)="onChangePeriodOption('isQuarterly');ErrorNotation = false;" [ngClass]="[isQuarterly?'activeQMY':'',model.subTabName=='IC'?'btn-cursor-none':'']">
                                    Quarterly
                                </div>
                                <div class="d-inline  QMY_Text QMYStyle YStyle" (click)="onChangePeriodOption('isAnnually');ErrorNotation = false;" [ngClass]="isAnnually?'activeQMY':''">
                                    Annual
                                </div>
                            </div>
        
                        </div>
                        <div class="d-inline cloud_download download-container">
                            <div class="d-inline pr-1 headerfontsize-beta">
                            <div class="d-inline">Logs</div>
                            <div class="d-inline pr-2 pl-1" title="Switch to view cell based audit trails">
                                <p-inputSwitch (onChange)="handleChange($event)" [(ngModel)]="ErrorNotation"
                                    class="toggle-switch"></p-inputSwitch>
                            </div>
                        </div>
                        <div class="d-inline textsplit"></div>
                            <div class="d-inline pl-2 pr-2">
                                <img *ngIf="!isDownload" src="assets/dist/images/Cloud-download.svg" (click)="export()" class="cursor-filter" alt="">
                                <span class="pl-1" *ngIf="isDownload">
                                    <i aria-hidden="true"
                                        class="download-circle-loader fa fa-circle-o-notch fa-1x fa-fw"></i>
                                </span>
                            </div>
        
                            <div class="d-inline textsplit"></div>
        
                            <div class="d-inline pl-2"><img id="dropdownMenuButton" [matMenuTriggerFor]="menu" #filterMenuTrigger="matMenuTrigger" src="assets/dist/images/ConfigurationWhite.svg" class="cursor-filter" alt=""></div>
                        </div>
                    </div>
        
                </div>
            </div>
        </div>
        <div class="d-none" #OutsideClick>Out click</div>
        <mat-menu #menu="matMenu" [hasBackdrop]="true" class="fixed-menu">
            <form name="form" #form="ngForm" (ngSubmit)="form.form.valid && onSubmit()" (click)="$event.stopPropagation()">
                <div class="filter-first">
                    <div class="row m-0 ">
                        <div class="col-12 pb-1 pt-3 label-align">
                            Period
                        </div>
                        <div class="col-12 pl-3 pr-3">
                            <p-dropdown appendTo="body" panelStyleClass="mat-menu-dropdown" class="tablefilter-dropdrown-width" #periodType="ngModel" [(ngModel)]="model.periodType" (onChange)="onPeriodChange($event)" name="periodtype" [options]="periodTypes" optionLabel="type">
                            </p-dropdown>
                        </div>
        
                    </div>
                    <div class="row m-0" *ngIf="model.periodType?.type=='Date Range' ">
                        <div class="col-12 pb-1 pt-3 label-align ">
                            Date Range
                        </div>
                        <div class="col-12 pl-3 pr-3">
                            <p-calendar appendTo="body" panelStyleClass="mat-menu-calendar" #myCalendar placeholder="Select Date Range " name="startPeriod" view="month" showButtonBar="true" [(ngModel)]="model.startPeriod" #startPeriod selectionMode="range" [yearNavigator]="true"
                                [readonlyInput]="true" hideOnDateTimeSelect="true" inputStyleClass="date-picker-input" dateFormat="mm/yy" [showIcon]="true" yearRange={{yearRange}} [maxDate]="today" class="calender-font table-header-calender-width" (onSelect)="validateKPIPeriod(form,model) ">
                            </p-calendar>
                        </div>
                    </div>
                    <div class="row m-0">
                        <div class="col-12 pb-1 pt-3 label-align">
                            Fx rates
                        </div>
                        <div class="col-12 pl-3 pr-3">
                            <p-dropdown appendTo="body" panelStyleClass="mat-menu-dropdown" class="tablefilter-dropdrown-width" #fxRates="ngModel" name="fxRates" [(ngModel)]="model.fxRates" (onChange)="onFxRateSourceChange()" [options]="fxRatesList" optionLabel="type">
                            </p-dropdown>
                        </div>
                    </div>
                    <div class="row m-0">
                        <div class="col-12 pb-1 pt-3 label-align">
                            Currency
                        </div>
                        <div class="col-12 pl-3 pr-3">
                            <p-dropdown class="tablefilter-dropdrown-width" appendTo="body" placeholder="Select Currency" panelStyleClass="mat-menu-dropdown" (onChange)="onCurrencyChange($event)"  #currencyCode="ngModel" (onChange)="changesCurrency($event)" name="currencyCode" [(ngModel)]="model.currencyCode" [options]="CurrencyList" optionLabel="currencyCode">
                            </p-dropdown>
                        </div>
                    </div>
                    <div class="row m-0">
                        <div class="col-12 pb-1 pt-3 label-align">
                            Currency Unit
                        </div>
                        <div class="col-12 pl-3 pr-3">
                            <p-dropdown appendTo="body" panelStyleClass="mat-menu-dropdown" [disabled]="true" class="tablefilter-dropdrown-width" #currecyUnit="ngModel" name="currecyUnit" [(ngModel)]="model.currecyUnit" name="Unit" [options]="unitTypeList" optionLabel="unitType">
                            </p-dropdown>
                        </div>
                    </div>
                </div>
                <div class="filter-footer pr-3 pb-3 mr-2">
                    <div class="d-inline ">
                        <button type="reset" (click)="$event.stopPropagation();$event.preventDefault();formReset(form);isSubmit == true ?isSubmit = false:isSubmit = true;" class="btn btn-reset">Reset</button>
                    </div>
                    <div class="d-inline ">
                        <button type="submit" [disabled] ="model.periodType?.type=='Date Range' && (this.model.startPeriod == null || this.model.startPeriod == undefined)" class="btn btn-light btn-app pt-0 pb-0">Apply</button>
                    </div>
                </div>
            </form>
        </mat-menu>
          <container-element [ngSwitch]="tabName">
            <app-profit-loss-beta [tabName]="tabName" [isDownload]="isDownload" [isErrorLog]="ErrorNotation" (onChangeValueType)="setValueType($event)" *ngSwitchCase="'Profit & Loss'" [model]="model" [valueType]="model.subTabName" [isFilter]="isSubmit" [periodType]="selectedPeriodType" [selectedCurrency]="selectedCurrencyCode"            
            (changeOptionType) = "changeOptionType($event)" (isDownloading) = "isDownloading($event)"></app-profit-loss-beta>

          <app-balance-sheet-beta [tabName]="tabName" [isDownload]="isDownload" [isErrorLog]="ErrorNotation" (onChangeValueType)="setValueType($event)" *ngSwitchCase="'Balance Sheet'" [model]="model" [valueType]="model.subTabName" [isFilter]="isSubmit" [periodType]="selectedPeriodType" [selectedCurrency]="selectedCurrencyCode" 
          (changeOptionType) = "changeOptionType($event)" (isDownloading) = "isDownloading($event)"></app-balance-sheet-beta>
          
          <app-cashflow-beta [tabName]="tabName" [isDownload]="isDownload" [isErrorLog]="ErrorNotation" (onChangeValueType)="setValueType($event)" *ngSwitchCase="'Cash Flow'" [model]="model" [valueType]="model.subTabName" [isFilter]="isSubmit" [periodType]="selectedPeriodType" [selectedCurrency]="selectedCurrencyCode" 
          (changeOptionType) = "changeOptionType($event)" (isDownloading) = "isDownloading($event)"></app-cashflow-beta>
         </container-element>
      </div>
  </div>
</div>
<div class="row mr-0 ml-0">
    <div class="col-md-12 col-sm-12 col-lg-12 col-xl-12 pr-0 pl-0">
        <div class="pt-0 mb-0">
            <span class="rcalcLegend"></span>
            <span class="pl-2 pr-3">Converted Value</span>
        </div>
    </div>
    </div>
