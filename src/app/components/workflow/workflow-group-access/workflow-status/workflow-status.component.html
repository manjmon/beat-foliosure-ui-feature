<div id="workFlowStatusContainer" class="right-section">
  <div class="row mr-0 ml-0 tabradius border search-section srch-work-bb-no">
    <div id="TabTitle"
      class="col-12 col-sm-12 col-xs-12 col-lg-12 col-xl-12 col-md-12 group-search pl-0 pr-0 bgColorFAFAFB">
      <div class="Title font-weight-bold">
        Workflow status
      </div>
    </div>

    <div id="StatusTableContainer"
      class="col-12 col-sm-12 col-xs-12 col-lg-12 col-xl-12 col-md-12 pl-0 pr-0 content-section"
      [ngStyle]="{'height':scrollHeight+'px'}">
      <div id="WorkFlowStatusZeroState" *ngIf="StatusList.length === 0">
        <img class="EmptyStateImgStyle" src="assets/dist/images/WorkFlowZeroState.svg" alt="" /><br />
        <span class="font-weight-bold">Please add a workflow status</span><br />
        <span class="workflowZeroStateFontStyle">Add statuses to create a workflow</span>
      </div>
      <div *ngIf="StatusList.length > 0">
        <p-table styleClass="p-datatable-gridlines" [value]="StatusList" [resizableColumns]="true" [lazy]="true" scrollable="true" [virtualScroll]="true"
          (onLazyLoad)="loadUsersLazy($event)" [scrollHeight]="scrollHeight+'px'" >
          <ng-template pTemplate="body" let-status>
            <tr class="backgroundStyleOnHover">
              <td class="table-width">
                <div>
                  <checkbox marginLeft="4px" marginTop="-9px" height="20px" width="20" [isChecked]="status.isSelected" [value]=""
                    (change)="handleCheckBox(status)" [disabled]="selectedSubGroupId === 0">
                  </checkbox>
                </div>
              </td>
              <td>
                <span>{{status.name}}</span>
                <span *ngIf="status.hasRework" class="infoIconSpan showToolTip" title="Has Approve/Rework action">
                  <img class="infoIconImg" [src]="'assets/dist/images/InfoGrey.svg'" alt="" />
                </span>
                <span class="float-right actions">
                  <img class="info" (click)="openDescPopUp(status)" alt=""
                    [src]="'assets/dist/images/More_Border Grey.svg'" />
                  <img class="info pl6" (click)="onEditStatus(status)" alt="" [src]="'assets/dist/images/EditIcon.svg'" />
                  <img class="info pl6" (click)="onDeleteStatus(status)" alt="" [src]="'assets/dist/images/delete.svg'" />
                </span>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
    <div class="col-12 col-sm-12 col-xs-12 col-lg-12 col-xl-12 col-md-12 pl-0 pr-0">
      <div class="row mr-0 ml-0 group-right-sec">
        <div class="col-12 col-sm-12 col-md-12 col-xl-12 col-lg-12  pl-0 pr-0">
          <div class="float-left" (click)="ShowAddStatusPopup()"> <span><button class="btn btn-nep-default">
                <i class="fa fa-plus" aria-hidden="true"></i> Status</button></span>
          </div>
          <div class="float-right">
            <span class="pr-2"><button [disabled]="disableResetBtn"  class="btn btn-nep-default" (click)="resetStatusMapping()"> Reset</button></span>
            <span><button [disabled]="disableMapBtn"  class="btn btn-nep-primary" (click)="mapOrUnmapStatus()"> Map <span class="pl-1 circle-loader" *ngIf="loading">
              <i aria-hidden="true" class="fa fa-circle-o-notch fa-1x fa-fw"></i>
          </span></button></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="isAddStatus">
    <confirm-modal class="" [primaryButtonName]="AddOrUpdateStatusPopupButton" id="status-add-dialog"
      secondaryButtonName="Cancel" [modalTitle]="AddOrUpdateStatusPopupTitle" customTop="27%"
      (secondaryButtonEvent)="CloseAddStatusPopup()" (primaryButtonEvent)="addOrUpdateWorkflowStatus()"
      [toasterMessage]="popUpToasterMessage" [isToasterSuccess]="isToasterSuccess" [popupToasterStyle]="popupToasterStyle"
      [disablePrimaryButton]="newStatusName === '' || (StatusToBeUpdatedOrDeleted !== undefined && StatusToBeUpdatedOrDeleted.name === newStatusName)">
      <div class="row mr-0 ml-0 main-row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 pl-0 pr-0">
          <div class="row mr-0 ml-0">
            <div class="col-lg-12 col-md-5 col-xs-5 " [ngClass]="UpdateKpi?'pt-0':' kpi-padding-top'">
              <div class="popupcommon-labelpadding">Name<span class="kpi-addorupdate-errorcolor">*</span>
              </div>

              <div class="custom-nep-input">
                <label class="nep-input nep-input-textarea kpitext-label">
                  <textarea rows="1" placeholder="input something" spellcheck="false" data-ms-editor="true"
                    class="txt-area-hght-ovrflw" [(ngModel)]="newStatusName" placeholder=""
                    (input)="onAddStatusChange($event.target.value)"></textarea>
                </label>
              </div>
            </div>
            <div class="col-lg-12 col-md-5 col-xs-5 kpi-padding-top">
              <div class="popupcommon-labelpadding">Description</div>
              <div class="custom-nep-input">
                <label class="nep-input nep-input-textarea kpitext-label">
                  <textarea rows="4" placeholder="input something" spellcheck="false" data-ms-editor="true"
                  class="txt-area-hght-ovrflw" [(ngModel)]="newStatusDesc" placeholder=""></textarea>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </confirm-modal>
  </div>

  <div *ngIf="isDescPopup" class="nep-modal nep-modal-show nepshw-db-bg">
    <div class="nep-modal-mask"></div>
    <div class="nep-card nep-card-shadow nep-modal-panel nep-modal-default nepshow-pr-dif-top">
      <div class="nep-card-header nep-modal-title">
        <div class="d-inline">Description</div>
        <div class="float-right desc-icon">
          <span (click)="closeDescPopUp()"><i class="fa fa-times" aria-hidden="true"></i></span>
        </div>
      </div>
      <div class="nep-card-body">
        <div *ngIf="newStatusDesc?.length>0 && newStatusDesc!=null"> {{ newStatusDesc }}</div>
        <div class="text-center" *ngIf="newStatusDesc==='' || newStatusDesc===null">
          <img src="assets/dist/images/emptyStateKpi.svg" alt="" />
          <div class="pt-4 pr-4 pl-4 pb-0">
            No description available yet!
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="showDelStatusConfirmation">
    <modal customwidth="489px" modalTitle="Confirmation" primaryButtonName="Confirm" secondaryButtonName="Cancel"
      (primaryButtonEvent)="deleteStatus()" (secondaryButtonEvent)="closeDelStatusConfirmation()">
      <div class="row">
        <div class="col-lg-12 col-md-12 col-xs-12">
          Are you sure you want to delete this status?
        </div>
      </div>
    </modal>
  </div>

  <div *ngIf="showMoveProfilesPopUp" class="nep-modal nep-modal-show nepshw-db-bg">
    <div class="nep-modal-mask"></div>
    <div class="nep-card nep-card-shadow nep-modal-panel nep-modal-default nepmodal-pr-dtop-wid">
      <div class="nep-card-header nep-modal-title">
        <div class="d-inline"><img class="yellowInfoIcon" src="assets/dist/images/yellowInfoIcon.svg" alt="" />Alert</div>
        <div class="float-right desc-icon">
          <span (click)="closeMoveProfilesPopUp()"><i class="fa fa-times" aria-hidden="true"></i></span>
        </div>
      </div>
      <div class="nep-card-body">
        <div> {{ moveProfilesMsg }}</div>
      </div>
    </div>
  </div>

</div>